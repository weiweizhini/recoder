<template>
    <div class="mask" v-if="showModal" @click="showModal=false"></div>
    <Configer class='pop' v-if="showModal"></Configer>
    <div class="container" >   
    <!-- 选择文本 -->
      <div class="center1">
        <div class="kong1"></div>
        <div class="song">
          <input type="button" class="btn btn-primary btn-sm " value= "选择录制的文本" id="add-txt-button" v-on:click="clickLoad">
          <input type="file" id="files" ref="refFile" accept="text/plain" style="display: none" v-on:change="fileLoad">
        </div>
        <div class="luzhitxt">
          <span id="sumText" class="sumText" >共 {{rowSumNumValue}} 句</span>
          <button class="fa fa-caret-square-o-left" id="rownumleft" @click="rownumleft()"></button>
          <span id="rownum" class="rownum" >{{rowNumValue}}</span>
          <!-- <input id="rownum" type="text" style="height:26x ;width:30px" ref="rowNum" :value="rowNumValue"/> -->
          <button class="fa fa-caret-square-o-right" id="rownumright" @click="rownumright()"></button>
          <button class="jump" id="jump" @click="jump()">跳转</button>
          <input id="rownum1" type="text"  ref="rowNum" :value="rowNumValue"/>
           <span id="t1" class="t1" >句</span>
          <button class="txtsave" id="txtsave" @click="txtsave()">保存</button>
          <!-- <textarea id="textArea"  style='width:500px; height:100px ; text-align:center;overflow-y:hidden '></textarea> -->
          <div class="kong"></div>
          <span id="textArea" class="textArea" >{{txtpre}}</span>
        </div>
         <!-- 显示波形图 -->
    <div id="waveform" class="waveform" ref="waveform" >
    <!-- 波形绘制区域 -->
    
   <div class="pd waveBox">
			<div style="border:1px solid #ccc;display:inline-block">
        <div style="height:100px;width:510px;" class="recwave" ref="recwave"></div></div>
		</div>
    </div>
    <div id="wave-timeline" ref="wavetimeline"></div>
    <!-- <div class="progress-bar" id="player-progress" role="progressbar" style="width: 10%;height:10px">               -->

    <!-- 显示语谱图 -->
    <div id="wave-spectrogram" class="wave-spectrogram" ref="wavespectrogram">
        
    </div>
    <div id="spe">
      <span>窗长</span>
      <el-radio-group size="large" v-model="radio" fill = 'red'>
          <el-radio  v-model="radioVal" :label="512" value="512" @change="changeWinLen($event)">512</el-radio>
          <el-radio  v-model="radioVal" :label="1024"  value="1024" @change="changeWinLen($event)" >1024</el-radio>
          <el-radio  v-model="radioVal" :label="2048"  value="2048" @change="changeWinLen($event)">2048</el-radio>
      </el-radio-group>
    </div>
      
        <div id="control">
          <div class="row music-track list-group-item d-flex justify-content-between align-items-center">                                        
            <div class="col-4">  
              <button class="fa fa-backward" id="btnbackward"  @click="rew()"></button>
              <button class="fa fa-forward" id="btnforward" @click="speek()"></button>
              <button class="fa fa-play" id="btnPlay" @click="btnPlay()"></button>
              <br>
              <button class="fa fa-pause" id="btnPause" @click="btnPause()"></button>
              <button class="fa fa-stop" id="btnStop"></button>
              <button class="fa fa-microphone" id="micStart"   @click="micControl()" v-if="btnStatus == 0"></button>
              <button class="fa fa-microphone-slash" id="micStop"   @click="micControl()" v-show="btnStatus == 1"></button>
              
            </div>
            <div class="col-4">
              <button id="recoStart" @click=" recoStart()">开始</button>
              <button id="recoStop" @click="recoStop()">停止</button>
              <button id="recoPause" @click="recoPause()">暂停</button>
              <button id="recoResume" @click="recoResume()">继续</button>
              <button id="save" @click="saveRecord()">保存</button>
              <button id="recoTrash" @click="closeFile()">下句</button>
              <!-- <button id="recoPlay" @click="recoPlay()">播放</button> -->
              <!-- <br> -->
              <!-- <button class="fa fa-recycle" id="recycle"></button> -->
              <!-- <button class="fa fa-file" id="save" @click="saveRecord()"></button>
              <button class="fa fa-trash" id="recoTrash" @click="closeFile()"></button> -->

            </div>
            <div class="col-4">
              <!-- <i class="fa fa-cog" id="config-button"></i> -->
              <!-- <button type="button" id="threed" @click="showModal=true">3D</button> -->
              <button type="button" id="threed" @click="threeDconfig()">3D</button>
              <input type="button" id="openFile" @click="openFile()" value= "打开">
              <input type="file" id="files" ref="refSongFile" style="display: none" v-on:change="fileLoad2">
              <button  type="button"   id="closeFile"  @click="closeFile()">关闭</button>
              <button  type="button"   id="closeFile"  @click="upload()">上传</button>
              <button  type="button"    id="test"  style="display: none;">测试</button>
              <!-- <button  type="button"    id="test"  @click="changeWinLen()">测试</button> -->
            </div>            
          </div>
        </div>
      </div>

      <el-dialog title="3D模拟场景配置" v-model="dialogVisible" width="50%">
        <el-form :model="form" label-width="120px">
          <el-form-item label="房间长">
            <el-input v-model="form.roomLength" style="width: 80%"></el-input>
          </el-form-item>
          <el-form-item label="房间宽">
            <el-input v-model="form.roomWidth" style="width: 80%"></el-input>
          </el-form-item>
          <el-form-item label="房间高">
            <el-input v-model="form.roomHeight" style="width: 80%"></el-input>
          </el-form-item>
          <el-form-item label="模拟录音文件">
             <el-input v-model="form.roomFile" style="width: 80%" type="text"></el-input>
             <!-- <span id="simuFileName" class="simuFileName" v-model="form.roomFile">{{recoMoFileName}}</span> -->
            <!-- <el-input v-model="form.roomFileName" :value="simuFileName" style="width: 80%"></el-input> -->
            <!-- <el-button id="selectSongFile" @click="selectSongFile()">选择文件</el-button>
            <input type="file" id="files" ref="moniSong" style="display: none" v-on:change="fileLoad3"> -->
          </el-form-item>
        </el-form>
        <template #footer>
            <span class="dialog-footer">
              <el-button @click="dialogVisible = false">取 消</el-button>
              <el-button type="primary" @click="generate">模 拟</el-button>
            </span>
        </template>
      </el-dialog>  
    </div>
    
</template>

<script >

import "../../node_modules/recorder-core/src/recorder-core.js"
import "../../node_modules/recorder-core/src/engine/mp3.js"
import "../../node_modules/recorder-core/src/engine/pcm.js"
import "../../node_modules/recorder-core/src/engine/wav.js"
import "../../node_modules/recorder-core/src/engine/mp3-engine.js"
import "../../node_modules/recorder-core/src/extensions/frequency.histogram.view.js"
import "../../node_modules/recorder-core/src/extensions/lib.fft.js"
import "../../node_modules/recorder-core/src/extensions/wavesurfer.view.js"
import "../../node_modules/recorder-core/src/extensions/waveview.js"

import "../../node_modules/wavesurfer.js/dist/wavesurfer.js"
import "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"
import "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.spectrogram.js"
import "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.timeline.js"
import "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.regions.js"
import "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.microphone.js"

import SpectrogramPlugin from "../../node_modules/wavesurfer.js/src/plugin/spectrogram/index.js"
import Timeline from "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.timeline.js"
import Regions from "../../node_modules/wavesurfer.js/dist/plugin/wavesurfer.regions.js"
import WaveSurfer from "../../node_modules/wavesurfer.js/dist/wavesurfer.js"
import Recorder from "recorder-core"

// import "../../node_modules/thrift/lib/nodejs/lib/thrift/thrift.js"
// import  "../gen-js/test_types.js"
// import "../gen-js/userService.js"

import Configer from './configer.vue'
import request from "../utils/request";
//import axios from 'axios'

var songTextArray;
var songtxt
var textArea
var rec, wave
var recBlob
var wavesurfer
export default {
    name: 'Control',
    
    data() {
      return {
        textFileName:"录制文本",
        wavesurfer: null,
        txtpre: "录制文本",
        rowNumValue: "1",
        rowSumNumValue: "1",
        showModal: false,
        form: {},
        dialogVisible: false,
        btnStatus:0,
        fileList: [
          {
            
          },
        ],
        simuFileName: " ",
        radioVal: 512,
        recoMoFileName:" "
      }
    },

    components: {
      Configer
    },

    // created () {
    //   this.init()
    // },
    //方法
    methods: {
    // init() {
    //   const transport = new Thrift.Transport('http://localhost:8090')
    //   const protocol = new Thrift.Protocol(transport)
    //   const client = new TodoClient(protocol)
    //   this.client = client
    //   //this.getList()
    //   //var thriftConnection = thrift.createConnection('127.0.0.1', 8090,50000);
    // },

    handleRemove(file, fileList) {
      console.log(file, fileList)
    },
    handlePreview(file) {
      console.log(file)
    },
    handleExceed(files, fileList) {
      this.$message.warning(
        `The limit is 3, you selected ${
          files.length
        } files this time, add up to ${files.length + fileList.length} totally`
      )
    },
    // beforeRemove(file, fileList) {
    //   return this.$confirm(`Cancel the transfert of ${file.name} ?`)
    // },
      
      
      
      getObjectURL (file) {
        let url = null ;
        if (window.createObjectURL!=undefined) { // basic
          url = window.createObjectURL(file) ;
        }else if (window.webkitURL!=undefined) { // webkit or chrome
          url = window.webkitURL.createObjectURL(file) ;
        }else if (window.URL!=undefined) { // mozilla(firefox)
          url = window.URL.createObjectURL(file) ;
        }
        return url ;
      },

      openFile() {
        this.$refs.refSongFile.dispatchEvent(new MouseEvent('click'))
      },

      fileLoad2() {
        const selectedFile = this.$refs.refSongFile.files[0];
        // this.DataUrl =this.getObjectURL(selectedFile)
        // this.$options.methods.blobShowVoice(this.DataUrl);
        console.log(this.$refs.refFile.files)
        //控制台打印
        var name = selectedFile.name; //选中文件的文件名
        var size = selectedFile.size; //选中文件的大小
        console.log("文件名:" + name + "大小:" + size);
        console.log(selectedFile);
        
        var fileReader  = new FileReader();
        fileReader.readAsBinaryString(selectedFile);
        fileReader.onloadend = () => {
          //console.log(this.result);
          this.$refs.recwave.style.display='none'
          const blob = new Blob([selectedFile])
          this.$options.methods.blobShowVoice(blob);
          
        };
        //解决onload函数异步问题 延迟执行
        setTimeout(() => {
            
        },500);
      

      },

      
      //这里的this 是 vm  vue实例 
      //点击选择录制文本按钮方法
      clickLoad(){
        this.$refs.refFile.dispatchEvent(new MouseEvent('click'))
        },

      //读取录制文本的方法
      fileLoad() {
        const selectedFile = this.$refs.refFile.files[0];
        console.log(this.$refs.refFile.files)
        //控制台打印
        var name = selectedFile.name; //选中文件的文件名
        var size = selectedFile.size; //选中文件的大小
        console.log("文件名:" + name + "大小:" + size);
        name = name.slice(0,-4)
        this.$data.textFileName = name
        console.log(name);
        var reader = new FileReader();
        reader.readAsText(selectedFile);
        //reader必须onloader
        reader.onload = function() {
            songTextArray = this.result.split(/[\r\n]/)            
            textArea = songTextArray[0];
            console.log(textArea);
           
           //去掉文本数组中的空格元素
            songtxt = []
            for(var i = 0; i < songTextArray.length; i++){
              if(songTextArray[i] != ""){
                songtxt.push(songTextArray[i])
              }
            }

            console.log(songtxt.length);
        }

        //解决onload函数异步问题 延迟执行
        setTimeout(() => {
            console.log(songtxt.length);
            
            this.$data.rowSumNumValue = songtxt.length;
            console.log(this.$data.rowSumNumValue);
            console.log(this.$data)
            console.log(textArea);
            this.$data.txtpre = textArea
            console.log(this.$data.txtpre)
            this.rowNumValue = 1;
        },500);
        
        

      },  
      
      //实现根据输入的行数进行跳转
      
      jump() {
        var rownum = this.$refs.rowNum.value;
        console.log(rownum);
        textArea = songtxt[rownum-1];
        console.log(textArea);
        //改变对应行数的数据
        this.$data.txtpre = textArea
        console.log(this.$data.txtpre)
        this.rowNumValue = rownum;
      },

      //实现文本的左移
      rownumleft() {
        var rownum = this.$refs.rowNum.value;
        console.log(rownum);
        var curRownum = Number(rownum)-1;
        console.log(curRownum);
        textArea = songtxt[curRownum-1];
        this.$data.txtpre = textArea;
        //修改当前行数 进行-1
        this.rowNumValue = curRownum;        
      },

      //实现文本的右移
      rownumright() {
        var rownum = this.$refs.rowNum.value;
        console.log(rownum);
        var curRownum = Number(rownum)+1;
        console.log(curRownum);
        textArea = songtxt[curRownum-1];
        this.$data.txtpre = textArea;
        this.rowNumValue = curRownum;  
      },
      //实现下句的文本跳转
      rownumright1(that) {
        var rownum = that.$refs.rowNum.value;
        console.log(rownum);
        var curRownum = Number(rownum)+1;
        console.log(curRownum);
        textArea = songtxt[curRownum-1];
        that.$data.txtpre = textArea;
        that.rowNumValue = curRownum;  
      },
    
    
      

      
      //实现语谱图 和波形图的展示
      //实现语谱图 和波形图的展示
      //实现语谱图 和波形图的展示
     ShowVoice(path){
      wavesurfer = WaveSurfer.create({
      container: "#waveform",
      waveColor: 'violet',
      progressColor: 'blue',
      scrollParent: true,
      plugins: [
        SpectrogramPlugin.create({
        wavesurfer: wavesurfer,
        container: '#wave-spectrogram',
        fftSamples: 512,                     
        noverlap: 352, //10 毫秒 160 
        windowFunc: 'hamming',      
        colorMap: [
    [0, 0, 0, 1],
    [0.011764705882352941, 0, 0, 1], [0.023529411764705882, 0, 0, 1], [0.03529411764705882, 0, 0, 1], [0.047058823529411764, 0, 0, 1], [0.058823529411764705, 0, 0, 1], [0.07058823529411765, 0, 0, 1], [0.08235294117647059, 0, 0, 1], [0.09411764705882353, 0, 0, 1], [0.10588235294117647, 0, 0, 1], [0.11764705882352941, 0, 0, 1], [0.12941176470588237, 0, 0, 1], [0.1411764705882353, 0, 0, 1], [0.15294117647058825, 0, 0, 1], [0.16470588235294117, 0, 0, 1], [0.17647058823529413, 0, 0, 1], [0.18823529411764706, 0, 0, 1], [0.2, 0, 0, 1], [0.21176470588235294, 0, 0, 1], [0.2235294117647059, 0, 0, 1], [0.23529411764705882, 0, 0, 1], [0.24705882352941178, 0, 0, 1], [0.25882352941176473, 0, 0, 1], [0.27058823529411763, 0, 0, 1], [0.2823529411764706, 0, 0, 1], [0.29411764705882354, 0, 0, 1], [0.3058823529411765, 0, 0, 1], [0.3176470588235294, 0, 0, 1], [0.32941176470588235, 0, 0, 1], [0.3411764705882353, 0, 0, 1], [0.35294117647058826, 0, 0, 1], [0.36470588235294116, 0, 0, 1], [0.3764705882352941, 0, 0, 1], [0.38823529411764707, 0, 0, 1], [0.4, 0, 0, 1], [0.4117647058823529, 0, 0, 1], [0.4235294117647059, 0, 0, 1], [0.43529411764705883, 0, 0, 1], [0.4470588235294118, 0, 0, 1], [0.4549019607843137, 0, 0, 1], [0.4666666666666667, 0, 0, 1], [0.47843137254901963, 0, 0, 1], [0.49019607843137253, 0, 0, 1], [0.5019607843137255, 0, 0, 1], [0.5137254901960784, 0, 0, 1], [0.5254901960784314, 0, 0, 1], [0.5372549019607843, 0, 0, 1], [0.5490196078431373, 0, 0, 1], [0.5607843137254902, 0, 0, 1], [0.5725490196078431, 0, 0, 1], [0.5843137254901961, 0, 0, 1], [0.596078431372549, 0, 0, 1], [0.6078431372549019, 0, 0, 1], [0.6196078431372549, 0, 0, 1], [0.6313725490196078, 0, 0, 1], [0.6431372549019608, 0, 0, 1], [0.6549019607843137, 0, 0, 1], [0.6666666666666666, 0, 0, 1], [0.6784313725490196, 0, 0, 1], [0.6901960784313725, 0, 0, 1], [0.7019607843137254, 0, 0, 1], [0.7137254901960784, 0, 0, 1], [0.7254901960784313, 0, 0, 1], [0.7372549019607844, 0, 0, 1], [0.7490196078431373, 0, 0, 1], [0.7607843137254902, 0, 0, 1], [0.7725490196078432, 0, 0, 1], [0.7843137254901961, 0, 0, 1], [0.796078431372549, 0, 0, 1], [0.807843137254902, 0, 0, 1], [0.8196078431372549, 0, 0, 1], [0.8313725490196079, 0, 0, 1], [0.8431372549019608, 0, 0, 1], [0.8549019607843137, 0, 0, 1], [0.8666666666666667, 0, 0, 1], [0.8784313725490196, 0, 0, 1], [0.8901960784313725, 0, 0, 1], [0.9019607843137255, 0, 0, 1], [0.9019607843137255, 0.011764705882352941, 0, 1], [0.9058823529411765, 0.023529411764705882, 0, 1], [0.9058823529411765, 0.03137254901960784, 0, 1], [0.9058823529411765, 0.043137254901960784, 0, 1], [0.9098039215686274, 0.054901960784313725, 0, 1], [0.9098039215686274, 0.06666666666666667, 0, 1], [0.9098039215686274, 0.07450980392156863, 0, 1], [0.9137254901960784, 0.08627450980392157, 0, 1], [0.9137254901960784, 0.09803921568627451, 0, 1], [0.9137254901960784, 0.10980392156862745, 0, 1], [0.9176470588235294, 0.11764705882352941, 0, 1], [0.9176470588235294, 0.12941176470588237, 0, 1], [0.9176470588235294, 0.1411764705882353, 0, 1], [0.9215686274509803, 0.15294117647058825, 0, 1], [0.9215686274509803, 0.1607843137254902, 0, 1], [0.9215686274509803, 0.17254901960784313, 0, 1], [0.9254901960784314, 0.1843137254901961, 0, 1], [0.9254901960784314, 0.19607843137254902, 0, 1], [0.9254901960784314, 0.20784313725490197, 0, 1], [0.9294117647058824, 0.21568627450980393, 0, 1], [0.9294117647058824, 0.22745098039215686, 0, 1], [0.9294117647058824, 0.23921568627450981, 0, 1], [0.9333333333333333, 0.25098039215686274, 0, 1], [0.9333333333333333, 0.25882352941176473, 0, 1], [0.9333333333333333, 0.27058823529411763, 0, 1], [0.9372549019607843, 0.2823529411764706, 0, 1], [0.9372549019607843, 0.29411764705882354, 0, 1], [0.9372549019607843, 0.30196078431372547, 0, 1], [0.9411764705882353, 0.3137254901960784, 0, 1], [0.9411764705882353, 0.3254901960784314, 0, 1], [0.9411764705882353, 0.33725490196078434, 0, 1], [0.9450980392156862, 0.34509803921568627, 0, 1], [0.9450980392156862, 0.3568627450980392, 0, 1], [0.9450980392156862, 0.3686274509803922, 0, 1], [0.9490196078431372, 0.3803921568627451, 0, 1], [0.9490196078431372, 0.38823529411764707, 0, 1], [0.9490196078431372, 0.4, 0, 1], [0.9529411764705882, 0.4117647058823529, 0, 1], [0.9529411764705882, 0.4235294117647059, 0, 1], [0.9529411764705882, 0.43529411764705883, 0, 1], [0.9529411764705882, 0.44313725490196076, 0, 1], [0.9568627450980393, 0.4549019607843137, 0, 1], [0.9568627450980393, 0.4666666666666667, 0, 1], [0.9568627450980393, 0.47843137254901963, 0, 1], [0.9607843137254902, 0.48627450980392156, 0, 1], [0.9607843137254902, 0.4980392156862745, 0, 1], [0.9607843137254902, 0.5098039215686274, 0, 1], [0.9647058823529412, 0.5215686274509804, 0, 1], [0.9647058823529412, 0.5294117647058824, 0, 1], [0.9647058823529412, 0.5411764705882353, 0, 1], [0.9686274509803922, 0.5529411764705883, 0, 1], [0.9686274509803922, 0.5647058823529412, 0, 1], [0.9686274509803922, 0.5725490196078431, 0, 1], [0.9725490196078431, 0.5843137254901961, 0, 1], [0.9725490196078431, 0.596078431372549, 0, 1], [0.9725490196078431, 0.6078431372549019, 0, 1], [0.9764705882352941, 0.6196078431372549, 0, 1], [0.9764705882352941, 0.6274509803921569, 0, 1], [0.9764705882352941, 0.6392156862745098, 0, 1], [0.9803921568627451, 0.6509803921568628, 0, 1], [0.9803921568627451, 0.6627450980392157, 0, 1], [0.9803921568627451, 0.6705882352941176, 0, 1], [0.984313725490196, 0.6823529411764706, 0, 1], [0.984313725490196, 0.6941176470588235, 0, 1], [0.984313725490196, 0.7058823529411765, 0, 1], [0.9882352941176471, 0.7137254901960784, 0, 1], [0.9882352941176471, 0.7254901960784313, 0, 1], [0.9882352941176471, 0.7372549019607844, 0, 1], [0.9921568627450981, 0.7490196078431373, 0, 1], [0.9921568627450981, 0.7568627450980392, 0, 1], [0.9921568627450981, 0.7686274509803922, 0, 1], [0.996078431372549, 0.7803921568627451, 0, 1], [0.996078431372549, 0.792156862745098, 0, 1], [0.996078431372549, 0.8, 0, 1], [1, 0.8117647058823529, 0, 1], [1, 0.8235294117647058, 0, 1], [1, 0.8235294117647058, 0.011764705882352941, 1], [1, 0.8274509803921568, 0.0196078431372549, 1], [1, 0.8274509803921568, 0.03137254901960784, 1], [1, 0.8313725490196079, 0.0392156862745098, 1], [1, 0.8313725490196079, 0.050980392156862744, 1], [1, 0.8352941176470589, 0.058823529411764705, 1], [1, 0.8352941176470589, 0.07058823529411765, 1], [1, 0.8392156862745098, 0.0784313725490196, 1], [1, 0.8392156862745098, 0.09019607843137255, 1], [1, 0.8392156862745098, 0.09803921568627451, 1], [1, 0.8431372549019608, 0.10980392156862745, 1], [1, 0.8431372549019608, 0.11764705882352941, 1], [1, 0.8470588235294118, 0.12941176470588237, 1], [1, 0.8470588235294118, 0.13725490196078433, 1], [1, 0.8509803921568627, 0.14901960784313725, 1], [1, 0.8509803921568627, 0.1568627450980392, 1], [1, 0.8549019607843137, 0.16862745098039217, 1], [1, 0.8549019607843137, 0.17647058823529413, 1], [1, 0.8549019607843137, 0.18823529411764706, 1], [1, 0.8588235294117647, 0.19607843137254902, 1], [1, 0.8588235294117647, 0.20784313725490197, 1], [1, 0.8627450980392157, 0.21568627450980393, 1], [1, 0.8627450980392157, 0.22745098039215686, 1], [1, 0.8666666666666667, 0.23529411764705882, 1], [1, 0.8666666666666667, 0.24705882352941178, 1], [1, 0.8666666666666667, 0.2549019607843137, 1], [1, 0.8705882352941177, 0.26666666666666666, 1], [1, 0.8705882352941177, 0.27450980392156865, 1], [1, 0.8745098039215686, 0.28627450980392155, 1], [1, 0.8745098039215686, 0.29411764705882354, 1], [1, 0.8784313725490196, 0.3058823529411765, 1], [1, 0.8784313725490196, 0.3137254901960784, 1], [1, 0.8823529411764706, 0.3254901960784314, 1], [1, 0.8823529411764706, 0.3333333333333333, 1], [1, 0.8823529411764706, 0.34509803921568627, 1], [1, 0.8862745098039215, 0.35294117647058826, 1], [1, 0.8862745098039215, 0.36470588235294116, 1], [1, 0.8901960784313725, 0.37254901960784315, 1], [1, 0.8901960784313725, 0.3843137254901961, 1], [1, 0.8941176470588236, 0.39215686274509803, 1], [1, 0.8941176470588236, 0.403921568627451, 1], [1, 0.8980392156862745, 0.4117647058823529, 1], [1, 0.8980392156862745, 0.4235294117647059, 1], [1, 0.8980392156862745, 0.43137254901960786, 1], [1, 0.9019607843137255, 0.44313725490196076, 1], [1, 0.9019607843137255, 0.45098039215686275, 1], [1, 0.9058823529411765, 0.4627450980392157, 1], [1, 0.9058823529411765, 0.47058823529411764, 1], [1, 0.9098039215686274, 0.4823529411764706, 1], [1, 0.9098039215686274, 0.49019607843137253, 1], [1, 0.9137254901960784, 0.5019607843137255, 1], [1, 0.9137254901960784, 0.5098039215686274, 1], [1, 0.9137254901960784, 0.5215686274509804, 1], [1, 0.9176470588235294, 0.5294117647058824, 1], [1, 0.9176470588235294, 0.5411764705882353, 1], [1, 0.9215686274509803, 0.5490196078431373, 1], [1, 0.9215686274509803, 0.5607843137254902, 1], [1, 0.9254901960784314, 0.5686274509803921, 1], [1, 0.9254901960784314, 0.5803921568627451, 1], [1, 0.9254901960784314, 0.5882352941176471, 1], [1, 0.9294117647058824, 0.6, 1], [1, 0.9294117647058824, 0.6078431372549019, 1], [1, 0.9333333333333333, 0.6196078431372549, 1], [1, 0.9333333333333333, 0.6274509803921569, 1], [1, 0.9372549019607843, 0.6392156862745098, 1], [1, 0.9372549019607843, 0.6470588235294118, 1], [1, 0.9411764705882353, 0.6588235294117647, 1], [1, 0.9411764705882353, 0.6666666666666666, 1], [1, 0.9411764705882353, 0.6784313725490196, 1], [1, 0.9450980392156862, 0.6862745098039216, 1], [1, 0.9450980392156862, 0.6980392156862745, 1], [1, 0.9490196078431372, 0.7058823529411765, 1], [1, 0.9490196078431372, 0.7176470588235294, 1], [1, 0.9529411764705882, 0.7254901960784313, 1], [1, 0.9529411764705882, 0.7372549019607844, 1], [1, 0.9568627450980393, 0.7450980392156863, 1], [1, 0.9568627450980393, 0.7568627450980392, 1], [1, 0.9568627450980393, 0.7647058823529411, 1], [1, 0.9607843137254902, 0.7764705882352941, 1], [1, 0.9607843137254902, 0.7843137254901961, 1], [1, 0.9647058823529412, 0.796078431372549, 1], [1, 0.9647058823529412, 0.803921568627451, 1], [1, 0.9686274509803922, 0.8156862745098039, 1], [1, 0.9686274509803922, 0.8235294117647058, 1], [1, 0.9725490196078431, 0.8352941176470589, 1], [1, 0.9725490196078431, 0.8431372549019608, 1], [1, 0.9725490196078431, 0.8549019607843137, 1], [1, 0.9764705882352941, 0.8627450980392157, 1], [1, 0.9764705882352941, 0.8745098039215686, 1], [1, 0.9803921568627451, 0.8823529411764706, 1], [1, 0.9803921568627451, 0.8941176470588236, 1], [1, 0.984313725490196, 0.9019607843137255, 1], [1, 0.984313725490196, 0.9137254901960784, 1], [1, 0.984313725490196, 0.9215686274509803, 1], [1, 0.9882352941176471, 0.9333333333333333, 1], [1, 0.9882352941176471, 0.9411764705882353, 1], [1, 0.9921568627450981, 0.9529411764705882, 1], [1, 0.9921568627450981, 0.9607843137254902, 1], [1, 0.996078431372549, 0.9725490196078431, 1], [1, 0.996078431372549, 0.9803921568627451, 1], [1, 1, 0.9921568627450981, 1], [1, 1, 1, 1]],
    }),
          Timeline.create({
          container: "#wavetimeline",
          fontSize: 14,
          primaryFontColor: "#9191a5",
          secondaryFontColor: "#9191a5",
          primaryColor: "#9191a5",
          secondaryColor: "#9191a5",
        }),

        Regions.create(
          {
            start: 1,
            end: 3,
            color: 'hsla(400, 100%, 30%, 0.5)'
          },
          {
            start: 5,
            end: 7,
            color: 'hsla(200, 50%, 70%, 0.4)'
          }

        )


    ]
    });
    wavesurfer.load(path)
    //this.$data.wavesurfer = this.wavesurfer
    
    },

    
    //录音后显示语谱图 波形图
    blobShowVoice(path) {
        wavesurfer = WaveSurfer.create({
        container: '#waveform',
        waveColor: 'violet',
        progressColor: 'blue',
        scrollParent: true,
        plugins: [
          SpectrogramPlugin.create({
          wavesurfer: wavesurfer,
          container: '#wave-spectrogram',
          fftSamples: 512,                     
          noverlap: 352, //10 毫秒 160 
          windowFunc: 'hamming',
          colorMap: [
          [0, 0, 0, 1],[0.011764705882352941, 0, 0, 1], [0.023529411764705882, 0, 0, 1], [0.03529411764705882, 0, 0, 1], [0.047058823529411764, 0, 0, 1], [0.058823529411764705, 0, 0, 1], [0.07058823529411765, 0, 0, 1], [0.08235294117647059, 0, 0, 1], [0.09411764705882353, 0, 0, 1], [0.10588235294117647, 0, 0, 1], [0.11764705882352941, 0, 0, 1], [0.12941176470588237, 0, 0, 1], [0.1411764705882353, 0, 0, 1], [0.15294117647058825, 0, 0, 1], [0.16470588235294117, 0, 0, 1], [0.17647058823529413, 0, 0, 1], [0.18823529411764706, 0, 0, 1], [0.2, 0, 0, 1], [0.21176470588235294, 0, 0, 1], [0.2235294117647059, 0, 0, 1], [0.23529411764705882, 0, 0, 1], [0.24705882352941178, 0, 0, 1], [0.25882352941176473, 0, 0, 1], [0.27058823529411763, 0, 0, 1], [0.2823529411764706, 0, 0, 1], [0.29411764705882354, 0, 0, 1], [0.3058823529411765, 0, 0, 1], [0.3176470588235294, 0, 0, 1], [0.32941176470588235, 0, 0, 1], [0.3411764705882353, 0, 0, 1], [0.35294117647058826, 0, 0, 1], [0.36470588235294116, 0, 0, 1], [0.3764705882352941, 0, 0, 1], [0.38823529411764707, 0, 0, 1], [0.4, 0, 0, 1], [0.4117647058823529, 0, 0, 1], [0.4235294117647059, 0, 0, 1], [0.43529411764705883, 0, 0, 1], [0.4470588235294118, 0, 0, 1], [0.4549019607843137, 0, 0, 1], [0.4666666666666667, 0, 0, 1], [0.47843137254901963, 0, 0, 1], [0.49019607843137253, 0, 0, 1], [0.5019607843137255, 0, 0, 1], [0.5137254901960784, 0, 0, 1], [0.5254901960784314, 0, 0, 1], [0.5372549019607843, 0, 0, 1], [0.5490196078431373, 0, 0, 1], [0.5607843137254902, 0, 0, 1], [0.5725490196078431, 0, 0, 1], [0.5843137254901961, 0, 0, 1], [0.596078431372549, 0, 0, 1], [0.6078431372549019, 0, 0, 1], [0.6196078431372549, 0, 0, 1], [0.6313725490196078, 0, 0, 1], [0.6431372549019608, 0, 0, 1], [0.6549019607843137, 0, 0, 1], [0.6666666666666666, 0, 0, 1], [0.6784313725490196, 0, 0, 1], [0.6901960784313725, 0, 0, 1], [0.7019607843137254, 0, 0, 1], [0.7137254901960784, 0, 0, 1], [0.7254901960784313, 0, 0, 1], [0.7372549019607844, 0, 0, 1], [0.7490196078431373, 0, 0, 1], [0.7607843137254902, 0, 0, 1], [0.7725490196078432, 0, 0, 1], [0.7843137254901961, 0, 0, 1], [0.796078431372549, 0, 0, 1], [0.807843137254902, 0, 0, 1], [0.8196078431372549, 0, 0, 1], [0.8313725490196079, 0, 0, 1], [0.8431372549019608, 0, 0, 1], [0.8549019607843137, 0, 0, 1], [0.8666666666666667, 0, 0, 1], [0.8784313725490196, 0, 0, 1], [0.8901960784313725, 0, 0, 1], [0.9019607843137255, 0, 0, 1], [0.9019607843137255, 0.011764705882352941, 0, 1], [0.9058823529411765, 0.023529411764705882, 0, 1], [0.9058823529411765, 0.03137254901960784, 0, 1], [0.9058823529411765, 0.043137254901960784, 0, 1], [0.9098039215686274, 0.054901960784313725, 0, 1], [0.9098039215686274, 0.06666666666666667, 0, 1], [0.9098039215686274, 0.07450980392156863, 0, 1], [0.9137254901960784, 0.08627450980392157, 0, 1], [0.9137254901960784, 0.09803921568627451, 0, 1], [0.9137254901960784, 0.10980392156862745, 0, 1], [0.9176470588235294, 0.11764705882352941, 0, 1], [0.9176470588235294, 0.12941176470588237, 0, 1], [0.9176470588235294, 0.1411764705882353, 0, 1], [0.9215686274509803, 0.15294117647058825, 0, 1], [0.9215686274509803, 0.1607843137254902, 0, 1], [0.9215686274509803, 0.17254901960784313, 0, 1], [0.9254901960784314, 0.1843137254901961, 0, 1], [0.9254901960784314, 0.19607843137254902, 0, 1], [0.9254901960784314, 0.20784313725490197, 0, 1], [0.9294117647058824, 0.21568627450980393, 0, 1], [0.9294117647058824, 0.22745098039215686, 0, 1], [0.9294117647058824, 0.23921568627450981, 0, 1], [0.9333333333333333, 0.25098039215686274, 0, 1], [0.9333333333333333, 0.25882352941176473, 0, 1], [0.9333333333333333, 0.27058823529411763, 0, 1], [0.9372549019607843, 0.2823529411764706, 0, 1], [0.9372549019607843, 0.29411764705882354, 0, 1], [0.9372549019607843, 0.30196078431372547, 0, 1], [0.9411764705882353, 0.3137254901960784, 0, 1], [0.9411764705882353, 0.3254901960784314, 0, 1], [0.9411764705882353, 0.33725490196078434, 0, 1], [0.9450980392156862, 0.34509803921568627, 0, 1], [0.9450980392156862, 0.3568627450980392, 0, 1], [0.9450980392156862, 0.3686274509803922, 0, 1], [0.9490196078431372, 0.3803921568627451, 0, 1], [0.9490196078431372, 0.38823529411764707, 0, 1], [0.9490196078431372, 0.4, 0, 1], [0.9529411764705882, 0.4117647058823529, 0, 1], [0.9529411764705882, 0.4235294117647059, 0, 1], [0.9529411764705882, 0.43529411764705883, 0, 1], [0.9529411764705882, 0.44313725490196076, 0, 1], [0.9568627450980393, 0.4549019607843137, 0, 1], [0.9568627450980393, 0.4666666666666667, 0, 1], [0.9568627450980393, 0.47843137254901963, 0, 1], [0.9607843137254902, 0.48627450980392156, 0, 1], [0.9607843137254902, 0.4980392156862745, 0, 1], [0.9607843137254902, 0.5098039215686274, 0, 1], [0.9647058823529412, 0.5215686274509804, 0, 1], [0.9647058823529412, 0.5294117647058824, 0, 1], [0.9647058823529412, 0.5411764705882353, 0, 1], [0.9686274509803922, 0.5529411764705883, 0, 1], [0.9686274509803922, 0.5647058823529412, 0, 1], [0.9686274509803922, 0.5725490196078431, 0, 1], [0.9725490196078431, 0.5843137254901961, 0, 1], [0.9725490196078431, 0.596078431372549, 0, 1], [0.9725490196078431, 0.6078431372549019, 0, 1], [0.9764705882352941, 0.6196078431372549, 0, 1], [0.9764705882352941, 0.6274509803921569, 0, 1], [0.9764705882352941, 0.6392156862745098, 0, 1], [0.9803921568627451, 0.6509803921568628, 0, 1], [0.9803921568627451, 0.6627450980392157, 0, 1], [0.9803921568627451, 0.6705882352941176, 0, 1], [0.984313725490196, 0.6823529411764706, 0, 1], [0.984313725490196, 0.6941176470588235, 0, 1], [0.984313725490196, 0.7058823529411765, 0, 1], [0.9882352941176471, 0.7137254901960784, 0, 1], [0.9882352941176471, 0.7254901960784313, 0, 1], [0.9882352941176471, 0.7372549019607844, 0, 1], [0.9921568627450981, 0.7490196078431373, 0, 1], [0.9921568627450981, 0.7568627450980392, 0, 1], [0.9921568627450981, 0.7686274509803922, 0, 1], [0.996078431372549, 0.7803921568627451, 0, 1], [0.996078431372549, 0.792156862745098, 0, 1], [0.996078431372549, 0.8, 0, 1], [1, 0.8117647058823529, 0, 1], [1, 0.8235294117647058, 0, 1], [1, 0.8235294117647058, 0.011764705882352941, 1], [1, 0.8274509803921568, 0.0196078431372549, 1], [1, 0.8274509803921568, 0.03137254901960784, 1], [1, 0.8313725490196079, 0.0392156862745098, 1], [1, 0.8313725490196079, 0.050980392156862744, 1], [1, 0.8352941176470589, 0.058823529411764705, 1], [1, 0.8352941176470589, 0.07058823529411765, 1], [1, 0.8392156862745098, 0.0784313725490196, 1], [1, 0.8392156862745098, 0.09019607843137255, 1], [1, 0.8392156862745098, 0.09803921568627451, 1], [1, 0.8431372549019608, 0.10980392156862745, 1], [1, 0.8431372549019608, 0.11764705882352941, 1], [1, 0.8470588235294118, 0.12941176470588237, 1], [1, 0.8470588235294118, 0.13725490196078433, 1], [1, 0.8509803921568627, 0.14901960784313725, 1], [1, 0.8509803921568627, 0.1568627450980392, 1], [1, 0.8549019607843137, 0.16862745098039217, 1], [1, 0.8549019607843137, 0.17647058823529413, 1], [1, 0.8549019607843137, 0.18823529411764706, 1], [1, 0.8588235294117647, 0.19607843137254902, 1], [1, 0.8588235294117647, 0.20784313725490197, 1], [1, 0.8627450980392157, 0.21568627450980393, 1], [1, 0.8627450980392157, 0.22745098039215686, 1], [1, 0.8666666666666667, 0.23529411764705882, 1], [1, 0.8666666666666667, 0.24705882352941178, 1], [1, 0.8666666666666667, 0.2549019607843137, 1], [1, 0.8705882352941177, 0.26666666666666666, 1], [1, 0.8705882352941177, 0.27450980392156865, 1], [1, 0.8745098039215686, 0.28627450980392155, 1], [1, 0.8745098039215686, 0.29411764705882354, 1], [1, 0.8784313725490196, 0.3058823529411765, 1], [1, 0.8784313725490196, 0.3137254901960784, 1], [1, 0.8823529411764706, 0.3254901960784314, 1], [1, 0.8823529411764706, 0.3333333333333333, 1], [1, 0.8823529411764706, 0.34509803921568627, 1], [1, 0.8862745098039215, 0.35294117647058826, 1], [1, 0.8862745098039215, 0.36470588235294116, 1], [1, 0.8901960784313725, 0.37254901960784315, 1], [1, 0.8901960784313725, 0.3843137254901961, 1], [1, 0.8941176470588236, 0.39215686274509803, 1], [1, 0.8941176470588236, 0.403921568627451, 1], [1, 0.8980392156862745, 0.4117647058823529, 1], [1, 0.8980392156862745, 0.4235294117647059, 1], [1, 0.8980392156862745, 0.43137254901960786, 1], [1, 0.9019607843137255, 0.44313725490196076, 1], [1, 0.9019607843137255, 0.45098039215686275, 1], [1, 0.9058823529411765, 0.4627450980392157, 1], [1, 0.9058823529411765, 0.47058823529411764, 1], [1, 0.9098039215686274, 0.4823529411764706, 1], [1, 0.9098039215686274, 0.49019607843137253, 1], [1, 0.9137254901960784, 0.5019607843137255, 1], [1, 0.9137254901960784, 0.5098039215686274, 1], [1, 0.9137254901960784, 0.5215686274509804, 1], [1, 0.9176470588235294, 0.5294117647058824, 1], [1, 0.9176470588235294, 0.5411764705882353, 1], [1, 0.9215686274509803, 0.5490196078431373, 1], [1, 0.9215686274509803, 0.5607843137254902, 1], [1, 0.9254901960784314, 0.5686274509803921, 1], [1, 0.9254901960784314, 0.5803921568627451, 1], [1, 0.9254901960784314, 0.5882352941176471, 1], [1, 0.9294117647058824, 0.6, 1], [1, 0.9294117647058824, 0.6078431372549019, 1], [1, 0.9333333333333333, 0.6196078431372549, 1], [1, 0.9333333333333333, 0.6274509803921569, 1], [1, 0.9372549019607843, 0.6392156862745098, 1], [1, 0.9372549019607843, 0.6470588235294118, 1], [1, 0.9411764705882353, 0.6588235294117647, 1], [1, 0.9411764705882353, 0.6666666666666666, 1], [1, 0.9411764705882353, 0.6784313725490196, 1], [1, 0.9450980392156862, 0.6862745098039216, 1], [1, 0.9450980392156862, 0.6980392156862745, 1], [1, 0.9490196078431372, 0.7058823529411765, 1], [1, 0.9490196078431372, 0.7176470588235294, 1], [1, 0.9529411764705882, 0.7254901960784313, 1], [1, 0.9529411764705882, 0.7372549019607844, 1], [1, 0.9568627450980393, 0.7450980392156863, 1], [1, 0.9568627450980393, 0.7568627450980392, 1], [1, 0.9568627450980393, 0.7647058823529411, 1], [1, 0.9607843137254902, 0.7764705882352941, 1], [1, 0.9607843137254902, 0.7843137254901961, 1], [1, 0.9647058823529412, 0.796078431372549, 1], [1, 0.9647058823529412, 0.803921568627451, 1], [1, 0.9686274509803922, 0.8156862745098039, 1], [1, 0.9686274509803922, 0.8235294117647058, 1], [1, 0.9725490196078431, 0.8352941176470589, 1], [1, 0.9725490196078431, 0.8431372549019608, 1], [1, 0.9725490196078431, 0.8549019607843137, 1], [1, 0.9764705882352941, 0.8627450980392157, 1], [1, 0.9764705882352941, 0.8745098039215686, 1], [1, 0.9803921568627451, 0.8823529411764706, 1], [1, 0.9803921568627451, 0.8941176470588236, 1], [1, 0.984313725490196, 0.9019607843137255, 1], [1, 0.984313725490196, 0.9137254901960784, 1], [1, 0.984313725490196, 0.9215686274509803, 1], [1, 0.9882352941176471, 0.9333333333333333, 1], [1, 0.9882352941176471, 0.9411764705882353, 1], [1, 0.9921568627450981, 0.9529411764705882, 1], [1, 0.9921568627450981, 0.9607843137254902, 1], [1, 0.996078431372549, 0.9725490196078431, 1], [1, 0.996078431372549, 0.9803921568627451, 1], [1, 1, 0.9921568627450981, 1], [1, 1, 1, 1]],
      }),
          Timeline.create({
            container: '#wave-timeline',
            fontSize: 14,
            primaryFontColor: "#9191a5",
            secondaryFontColor: "#9191a5",
            primaryColor: "#9191a5",
            secondaryColor: "#9191a5",
          }),

          Regions.create(
            {
              start: 1,
              end: 3,
              color: 'hsla(400, 100%, 30%, 0.5)'
            },
            {
              start: 5,
              end: 7,
              color: 'hsla(200, 50%, 70%, 0.4)'
            }

          ),
        ]
      });
      wavesurfer.loadBlob(path)
      //this.$data.wavesurfer = this.wavesurfer
      


 
  },

  btnPlay() {
   
    console.log(wavesurfer);
    wavesurfer.playPause();
  },

  btnPause() {
    wavesurfer.pause();
  },

  closeFile() {
    wavesurfer.destroy()
    // rec.close();
    console.log("rec",rec);
    this.$refs.recwave.style.display='block'
    this.recOpen();
    let that = this
    this.$options.methods.rownumright1(that)
    

  },

  //2021年12月18日
  //新增快进 回退
    rew() {
      wavesurfer.skip(-2)
    },
    // 快进
    speek() {
      wavesurfer.skip(2)
    },
  

  //实现录音的逻辑
  //一般在显示出录音按钮或相关的录音界面时进行此方法调用，后面用户点击开始录音时就能畅通无阻了
  recOpen() {
        rec=null;
        wave=null;
        recBlob=null;
        //type 输出类型 bitRate比特率  sampleRate采样率
         //格式，指定采样率hz、比特率kbps，其他参数使用默认配置；注意：是数字的参数必须提供数字，不要用字符串；需要使用的type类型，需提前把格式支持文件加载进来，比如使用wav格式需要提前加载wav.js编码引擎
        //var newRec=Recorder({type:"mp3",sampleRate:16000,bitRate:16 ,onProcess:function(buffers,powerLevel,bufferDuration,bufferSampleRate,newBufferIdx,asyncEnd){
          var newRec=Recorder({type:"wav",sampleRate:16000,bitRate:16 ,onProcess:function(buffers,powerLevel,bufferSampleRate){
          //录音实时回调，大约1秒调用12次本回调
          // document.querySelector(".recpowerx").style.width=powerLevel+"%";
          // document.querySelector(".recpowert").innerText=bufferDuration+" / "+powerLevel;			
          //可视化图形绘制
          wave.input(buffers[buffers.length-1],powerLevel,bufferSampleRate);
        }
      });

        //createDelayDialog(); //我们可以选择性的弹一个对话框：为了防止移动端浏览器存在第三种情况：用户忽略，并且（或者国产系统UC系）浏览器没有任何回调，此处demo省略了弹窗的代码
        newRec.open(function(){//打开麦克风授权获得相关资源
        //dialogCancel(); //如果开启了弹框，此处需要取消
      
        rec=newRec;
		
        //此处创建这些音频可视化图形绘制浏览器支持
        wave=Recorder.WaveSurferView({elem:".recwave", direction:-1,duration:45000, centerHeight:0, linear:[1,"rgba(0,0,255,1)",0.7,"rgba(0,0,255,1)",1,"rgba(0,0,255,1)"]});      
        console.log("已打开录音，可以点击录制开始录音了",2);
      },function(msg,isUserNotAllow){//用户拒绝未授权或不支持
        //dialogCancel(); //如果开启了弹框，此处需要取消
        console.log((isUserNotAllow?"UserNotAllow，":"")+"打开录音失败："+msg,1);
      });
	
      },

      //关闭录音，释放资源
      recClose() {
        if(rec){
          rec.close();
          console.log("已关闭");
        }else{
          console.log("未打开录音",1);
        }
      },

      //开始录音
      recStart() {
        if(rec&&Recorder.IsOpen()){
          recBlob=null;
          rec.start();
          console.log("已开始录音...");
        }else{
          console.log("未打开录音,重新打开录音 进行录制",1,);
        }
      },

      //暂停录音
      recPause() {
        if(rec&&Recorder.IsOpen()){
          rec.pause();
        }else{
          console.log("未打开录音",1);
        }
      },

      //恢复录音
      recResume() {
        if(rec&&Recorder.IsOpen()){
          rec.resume();
        }else{
          console.log("未打开录音",1);
        }
      },

      //结束录音 得到音频文件
      recStop() {
        if(!(rec&&Recorder.IsOpen())){
            console.log("未打开录音",1);
            return;
          }
        rec.stop((blob,duration) => {
          console.log(blob,(window.URL||window.webkitURL).createObjectURL(blob),"时长:"+duration+"ms");
         
          recBlob=blob;
          this.$options.methods.blobShowVoice(blob);
          //todo 将原来的波形图置为空
          console.log("已录制wav："+duration+"ms "+blob.size+"字节，可以点击播放、上传了",2);
          
          this.$options.methods.upload1(this.$data.textFileName,this.$data.rowNumValue)
          
        },function(msg){
          console.log("录音失败:"+msg,1);
        })
        rec.close();
        console.log("rec",rec);
        
        
      },

      //销毁
      recDestroy() {
        rec.close();
      },

      //保存录制文本
      txtsave() {
        console.log(this.$data.rowNumValue);
        console.log(typeof this.txtpre);
        const blob = new Blob([this.txtpre])
        let url = URL.createObjectURL(blob);
        let a = document.createElement('a');
        
        document.body.appendChild(a);
        a.style = 'display: none';
        a.href = url;
        //this.$children
        a.download =this.$data.rowNumValue + '.txt';
        a.click()
        setTimeout(function () {
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url)
        }, 100)
      },
      
    

      //保存文件
      saveRecord() {
        // console.log(this.$data.rowNumValue);
        let url = URL.createObjectURL(recBlob);
        let a = document.createElement('a');
        
        document.body.appendChild(a);
        a.style = 'display: none';
        a.href = url;
        //this.$children
        a.download =this.$data.rowNumValue + '.wav';
        a.click()
        setTimeout(function () {
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url)
        }, 100)
      },

      recPlay() {
        if(!recBlob){
          console.log("请先录音，然后停止后再播放",1);
          return;
        }
        var cls=("a"+Math.random()).replace(".","");
        console.log('播放中: <span class="'+cls+'"></span>');
        var audio=document.createElement("audio");
        audio.controls=true;
        document.querySelector("."+cls).appendChild(audio);
        //简单利用URL生成播放地址，注意不用了时需要revokeObjectURL，否则霸占内存
        audio.import (window.URL||window.webkitURL).createObjectURL(recBlob);
        audio.play();
        
        setTimeout(function(){
          (window.URL||window.webkitURL).revokeObjectURL(audio.src);
        },5000);
      },

    micStart() {
      this.recOpen()
      // if(this.$refs.recwave.style.display=='none'){
      //   this.$refs.recwave.style.display='block'
      // }
      
    },

    micStop() {
      this.$refs.recwave.style.display='none'
       this.recClose() 
       
    },

    recoStart() {
      if(wavesurfer!=null){
        wavesurfer.destroy()
      }
      
      this.$refs.recwave.style.display='block'
      this.recStart()
    },

    recoStop() {
      
      this.$refs.recwave.style.display='none'
      this.recStop()
      // setTimeout(() => {
      //   let url = URL.createObjectURL(recBlob);
      //   let a = document.createElement('a');
        
      //   document.body.appendChild(a);
      //   a.style = 'display: none';
      //   a.href = url;
      //   //this.$children
      //   var num = Math.floor(Math.random() * 1000) 
      //   console.log(num);

      //   a.download =this.$data.textFileName +'_' + this.$data.rowNumValue +'_' + num + '.wav';
      //   a.click()  
      //   document.body.removeChild(a);
      //   window.URL.revokeObjectURL(url)
               
      // }, 100)
     
      
    },

    recoPause() {
      this.recPause()
    },

    recoResume() {
      this.recResume()
    },

    recoPlay() {
      this.recPlay()
    },

    recoTrash() {
      this.recDestroy()
    },


    //3D模拟
    threeDconfig() {
      this.dialogVisible = true
      this.form = {}
      
      this.$data.recoMoFileName = this.$data.textFileName +'_' + this.$data.rowNumValue  + '.wav';
      this.form.roomFile = this.$data.recoMoFileName
    },

    //选择模拟录音的文件
    selectSongFile() {
        this.$refs.moniSong.dispatchEvent(new MouseEvent('click'))
    },

    fileLoad3() {
        const selectedFile = this.$refs.moniSong.files[0];

        console.log(this.$refs.moniSong.files)
        //控制台打印
        var name = selectedFile.name; //选中文件的文件名
        var size = selectedFile.size; //选中文件的大小
        console.log("文件名:" + name + "大小:" + size);
        console.log(selectedFile);

        this.$data.simuFileName = name;
        this.$data.form.roomFileName = name;
        console.log(this.$data.simuFileName);
        //解决onload函数异步问题 延迟执行
        setTimeout(() => {
            
        },500);
      

      },

      generate() {
        //console.log(this.form);
        // request.get("/pythonser/hello").then(response => {
          
        //   console.log(response[0].msg)
        // }).catch((response)=>{
        //   console.log(response)
        // })
        console.log(this.form);
        request.post("/pythonser/generate",this.form).then(response => {
          
          console.log(response[0].msg)
          this.dialogVisible = false
        }).catch((response)=>{
          console.log(response)
        })

        
        

        
      },

      //实现麦克风图标的切换
      micControl() {
        if(this.btnStatus == 0){         
          this.btnStatus = 1
          this.$options.methods.micStart()
        }
        else{         
          this.btnStatus = 0
          this.$options.methods.micStop()
        }
      },

      //上传
      
       upload1(ufname,ufrownum) {
        var blob1=recBlob;
        console.log(recBlob);
        if(!blob1){
          console.log("请先录音，然后停止后再上传",1);
          return;
        } 
        var api = "/api/recoder/upload";
        console.log(api);
        var form = new FormData();
        var uploadFileName = ufname +'_' + ufrownum  + '.wav'
        form.append("upfile", blob1, uploadFileName);
        console.log(form);
        var xhr=new XMLHttpRequest();
        setTimeout(() => {
            xhr.open("POST", api);
            xhr.send(form);
            console.log(form.get('upfile'));
        
            console.log("上传成功");
        },);
        },

      upload() {
        var blob1=recBlob;
        console.log(blob1);
        console.log(recBlob);
        if(!blob1){
          console.log("请先录音，然后停止后再上传",1);
          return;
        }
        
        var api = "/api/recoder/upload";
        console.log(api);
        // var onreadystatechange=function(title){
        //   return function(){
        //     if(xhr.readyState==4){
        //       if(xhr.status==200){
        //         console.log(title+"上传成功",2);
        //       }else{
        //         console.log(title+"没有完成上传。", "#d8c1a0");
                
        //         console.error(title+"上传失败",xhr.status,xhr.responseText);
        //       }
        //     }
        //   };
        // };
        var form = new FormData();
        var uploadFileName = this.$data.textFileName +'_' + this.$data.rowNumValue  + '.wav'
        form.append("upfile", blob1, uploadFileName);
        console.log(form);
        var xhr=new XMLHttpRequest();
        setTimeout(() => {
            xhr.open("POST", api);
            xhr.send(form);
            console.log(form.get('upfile'));
        
            console.log("上传成功");
        },);
        
        
      },

      //2022-01 新增 改变窗长
      changeWinLen(radioVal){
        console.log(radioVal);
        if(wavesurfer!=null){
          wavesurfer.destroy()
        }
        this.$options.methods.blobShowVoice1(recBlob, radioVal)
      },

      blobShowVoice1(path, winLen) {
        wavesurfer = WaveSurfer.create({
        container: '#waveform',
        waveColor: 'violet',
        progressColor: 'blue',
        scrollParent: true,
        plugins: [
          SpectrogramPlugin.create({
          wavesurfer: wavesurfer,
          container: '#wave-spectrogram',
          fftSamples: winLen,                     
          noverlap: 352, //10 毫秒 160 
          windowFunc: 'hamming',
          colorMap: [
          [0, 0, 0, 1],[0.011764705882352941, 0, 0, 1], [0.023529411764705882, 0, 0, 1], [0.03529411764705882, 0, 0, 1], [0.047058823529411764, 0, 0, 1], [0.058823529411764705, 0, 0, 1], [0.07058823529411765, 0, 0, 1], [0.08235294117647059, 0, 0, 1], [0.09411764705882353, 0, 0, 1], [0.10588235294117647, 0, 0, 1], [0.11764705882352941, 0, 0, 1], [0.12941176470588237, 0, 0, 1], [0.1411764705882353, 0, 0, 1], [0.15294117647058825, 0, 0, 1], [0.16470588235294117, 0, 0, 1], [0.17647058823529413, 0, 0, 1], [0.18823529411764706, 0, 0, 1], [0.2, 0, 0, 1], [0.21176470588235294, 0, 0, 1], [0.2235294117647059, 0, 0, 1], [0.23529411764705882, 0, 0, 1], [0.24705882352941178, 0, 0, 1], [0.25882352941176473, 0, 0, 1], [0.27058823529411763, 0, 0, 1], [0.2823529411764706, 0, 0, 1], [0.29411764705882354, 0, 0, 1], [0.3058823529411765, 0, 0, 1], [0.3176470588235294, 0, 0, 1], [0.32941176470588235, 0, 0, 1], [0.3411764705882353, 0, 0, 1], [0.35294117647058826, 0, 0, 1], [0.36470588235294116, 0, 0, 1], [0.3764705882352941, 0, 0, 1], [0.38823529411764707, 0, 0, 1], [0.4, 0, 0, 1], [0.4117647058823529, 0, 0, 1], [0.4235294117647059, 0, 0, 1], [0.43529411764705883, 0, 0, 1], [0.4470588235294118, 0, 0, 1], [0.4549019607843137, 0, 0, 1], [0.4666666666666667, 0, 0, 1], [0.47843137254901963, 0, 0, 1], [0.49019607843137253, 0, 0, 1], [0.5019607843137255, 0, 0, 1], [0.5137254901960784, 0, 0, 1], [0.5254901960784314, 0, 0, 1], [0.5372549019607843, 0, 0, 1], [0.5490196078431373, 0, 0, 1], [0.5607843137254902, 0, 0, 1], [0.5725490196078431, 0, 0, 1], [0.5843137254901961, 0, 0, 1], [0.596078431372549, 0, 0, 1], [0.6078431372549019, 0, 0, 1], [0.6196078431372549, 0, 0, 1], [0.6313725490196078, 0, 0, 1], [0.6431372549019608, 0, 0, 1], [0.6549019607843137, 0, 0, 1], [0.6666666666666666, 0, 0, 1], [0.6784313725490196, 0, 0, 1], [0.6901960784313725, 0, 0, 1], [0.7019607843137254, 0, 0, 1], [0.7137254901960784, 0, 0, 1], [0.7254901960784313, 0, 0, 1], [0.7372549019607844, 0, 0, 1], [0.7490196078431373, 0, 0, 1], [0.7607843137254902, 0, 0, 1], [0.7725490196078432, 0, 0, 1], [0.7843137254901961, 0, 0, 1], [0.796078431372549, 0, 0, 1], [0.807843137254902, 0, 0, 1], [0.8196078431372549, 0, 0, 1], [0.8313725490196079, 0, 0, 1], [0.8431372549019608, 0, 0, 1], [0.8549019607843137, 0, 0, 1], [0.8666666666666667, 0, 0, 1], [0.8784313725490196, 0, 0, 1], [0.8901960784313725, 0, 0, 1], [0.9019607843137255, 0, 0, 1], [0.9019607843137255, 0.011764705882352941, 0, 1], [0.9058823529411765, 0.023529411764705882, 0, 1], [0.9058823529411765, 0.03137254901960784, 0, 1], [0.9058823529411765, 0.043137254901960784, 0, 1], [0.9098039215686274, 0.054901960784313725, 0, 1], [0.9098039215686274, 0.06666666666666667, 0, 1], [0.9098039215686274, 0.07450980392156863, 0, 1], [0.9137254901960784, 0.08627450980392157, 0, 1], [0.9137254901960784, 0.09803921568627451, 0, 1], [0.9137254901960784, 0.10980392156862745, 0, 1], [0.9176470588235294, 0.11764705882352941, 0, 1], [0.9176470588235294, 0.12941176470588237, 0, 1], [0.9176470588235294, 0.1411764705882353, 0, 1], [0.9215686274509803, 0.15294117647058825, 0, 1], [0.9215686274509803, 0.1607843137254902, 0, 1], [0.9215686274509803, 0.17254901960784313, 0, 1], [0.9254901960784314, 0.1843137254901961, 0, 1], [0.9254901960784314, 0.19607843137254902, 0, 1], [0.9254901960784314, 0.20784313725490197, 0, 1], [0.9294117647058824, 0.21568627450980393, 0, 1], [0.9294117647058824, 0.22745098039215686, 0, 1], [0.9294117647058824, 0.23921568627450981, 0, 1], [0.9333333333333333, 0.25098039215686274, 0, 1], [0.9333333333333333, 0.25882352941176473, 0, 1], [0.9333333333333333, 0.27058823529411763, 0, 1], [0.9372549019607843, 0.2823529411764706, 0, 1], [0.9372549019607843, 0.29411764705882354, 0, 1], [0.9372549019607843, 0.30196078431372547, 0, 1], [0.9411764705882353, 0.3137254901960784, 0, 1], [0.9411764705882353, 0.3254901960784314, 0, 1], [0.9411764705882353, 0.33725490196078434, 0, 1], [0.9450980392156862, 0.34509803921568627, 0, 1], [0.9450980392156862, 0.3568627450980392, 0, 1], [0.9450980392156862, 0.3686274509803922, 0, 1], [0.9490196078431372, 0.3803921568627451, 0, 1], [0.9490196078431372, 0.38823529411764707, 0, 1], [0.9490196078431372, 0.4, 0, 1], [0.9529411764705882, 0.4117647058823529, 0, 1], [0.9529411764705882, 0.4235294117647059, 0, 1], [0.9529411764705882, 0.43529411764705883, 0, 1], [0.9529411764705882, 0.44313725490196076, 0, 1], [0.9568627450980393, 0.4549019607843137, 0, 1], [0.9568627450980393, 0.4666666666666667, 0, 1], [0.9568627450980393, 0.47843137254901963, 0, 1], [0.9607843137254902, 0.48627450980392156, 0, 1], [0.9607843137254902, 0.4980392156862745, 0, 1], [0.9607843137254902, 0.5098039215686274, 0, 1], [0.9647058823529412, 0.5215686274509804, 0, 1], [0.9647058823529412, 0.5294117647058824, 0, 1], [0.9647058823529412, 0.5411764705882353, 0, 1], [0.9686274509803922, 0.5529411764705883, 0, 1], [0.9686274509803922, 0.5647058823529412, 0, 1], [0.9686274509803922, 0.5725490196078431, 0, 1], [0.9725490196078431, 0.5843137254901961, 0, 1], [0.9725490196078431, 0.596078431372549, 0, 1], [0.9725490196078431, 0.6078431372549019, 0, 1], [0.9764705882352941, 0.6196078431372549, 0, 1], [0.9764705882352941, 0.6274509803921569, 0, 1], [0.9764705882352941, 0.6392156862745098, 0, 1], [0.9803921568627451, 0.6509803921568628, 0, 1], [0.9803921568627451, 0.6627450980392157, 0, 1], [0.9803921568627451, 0.6705882352941176, 0, 1], [0.984313725490196, 0.6823529411764706, 0, 1], [0.984313725490196, 0.6941176470588235, 0, 1], [0.984313725490196, 0.7058823529411765, 0, 1], [0.9882352941176471, 0.7137254901960784, 0, 1], [0.9882352941176471, 0.7254901960784313, 0, 1], [0.9882352941176471, 0.7372549019607844, 0, 1], [0.9921568627450981, 0.7490196078431373, 0, 1], [0.9921568627450981, 0.7568627450980392, 0, 1], [0.9921568627450981, 0.7686274509803922, 0, 1], [0.996078431372549, 0.7803921568627451, 0, 1], [0.996078431372549, 0.792156862745098, 0, 1], [0.996078431372549, 0.8, 0, 1], [1, 0.8117647058823529, 0, 1], [1, 0.8235294117647058, 0, 1], [1, 0.8235294117647058, 0.011764705882352941, 1], [1, 0.8274509803921568, 0.0196078431372549, 1], [1, 0.8274509803921568, 0.03137254901960784, 1], [1, 0.8313725490196079, 0.0392156862745098, 1], [1, 0.8313725490196079, 0.050980392156862744, 1], [1, 0.8352941176470589, 0.058823529411764705, 1], [1, 0.8352941176470589, 0.07058823529411765, 1], [1, 0.8392156862745098, 0.0784313725490196, 1], [1, 0.8392156862745098, 0.09019607843137255, 1], [1, 0.8392156862745098, 0.09803921568627451, 1], [1, 0.8431372549019608, 0.10980392156862745, 1], [1, 0.8431372549019608, 0.11764705882352941, 1], [1, 0.8470588235294118, 0.12941176470588237, 1], [1, 0.8470588235294118, 0.13725490196078433, 1], [1, 0.8509803921568627, 0.14901960784313725, 1], [1, 0.8509803921568627, 0.1568627450980392, 1], [1, 0.8549019607843137, 0.16862745098039217, 1], [1, 0.8549019607843137, 0.17647058823529413, 1], [1, 0.8549019607843137, 0.18823529411764706, 1], [1, 0.8588235294117647, 0.19607843137254902, 1], [1, 0.8588235294117647, 0.20784313725490197, 1], [1, 0.8627450980392157, 0.21568627450980393, 1], [1, 0.8627450980392157, 0.22745098039215686, 1], [1, 0.8666666666666667, 0.23529411764705882, 1], [1, 0.8666666666666667, 0.24705882352941178, 1], [1, 0.8666666666666667, 0.2549019607843137, 1], [1, 0.8705882352941177, 0.26666666666666666, 1], [1, 0.8705882352941177, 0.27450980392156865, 1], [1, 0.8745098039215686, 0.28627450980392155, 1], [1, 0.8745098039215686, 0.29411764705882354, 1], [1, 0.8784313725490196, 0.3058823529411765, 1], [1, 0.8784313725490196, 0.3137254901960784, 1], [1, 0.8823529411764706, 0.3254901960784314, 1], [1, 0.8823529411764706, 0.3333333333333333, 1], [1, 0.8823529411764706, 0.34509803921568627, 1], [1, 0.8862745098039215, 0.35294117647058826, 1], [1, 0.8862745098039215, 0.36470588235294116, 1], [1, 0.8901960784313725, 0.37254901960784315, 1], [1, 0.8901960784313725, 0.3843137254901961, 1], [1, 0.8941176470588236, 0.39215686274509803, 1], [1, 0.8941176470588236, 0.403921568627451, 1], [1, 0.8980392156862745, 0.4117647058823529, 1], [1, 0.8980392156862745, 0.4235294117647059, 1], [1, 0.8980392156862745, 0.43137254901960786, 1], [1, 0.9019607843137255, 0.44313725490196076, 1], [1, 0.9019607843137255, 0.45098039215686275, 1], [1, 0.9058823529411765, 0.4627450980392157, 1], [1, 0.9058823529411765, 0.47058823529411764, 1], [1, 0.9098039215686274, 0.4823529411764706, 1], [1, 0.9098039215686274, 0.49019607843137253, 1], [1, 0.9137254901960784, 0.5019607843137255, 1], [1, 0.9137254901960784, 0.5098039215686274, 1], [1, 0.9137254901960784, 0.5215686274509804, 1], [1, 0.9176470588235294, 0.5294117647058824, 1], [1, 0.9176470588235294, 0.5411764705882353, 1], [1, 0.9215686274509803, 0.5490196078431373, 1], [1, 0.9215686274509803, 0.5607843137254902, 1], [1, 0.9254901960784314, 0.5686274509803921, 1], [1, 0.9254901960784314, 0.5803921568627451, 1], [1, 0.9254901960784314, 0.5882352941176471, 1], [1, 0.9294117647058824, 0.6, 1], [1, 0.9294117647058824, 0.6078431372549019, 1], [1, 0.9333333333333333, 0.6196078431372549, 1], [1, 0.9333333333333333, 0.6274509803921569, 1], [1, 0.9372549019607843, 0.6392156862745098, 1], [1, 0.9372549019607843, 0.6470588235294118, 1], [1, 0.9411764705882353, 0.6588235294117647, 1], [1, 0.9411764705882353, 0.6666666666666666, 1], [1, 0.9411764705882353, 0.6784313725490196, 1], [1, 0.9450980392156862, 0.6862745098039216, 1], [1, 0.9450980392156862, 0.6980392156862745, 1], [1, 0.9490196078431372, 0.7058823529411765, 1], [1, 0.9490196078431372, 0.7176470588235294, 1], [1, 0.9529411764705882, 0.7254901960784313, 1], [1, 0.9529411764705882, 0.7372549019607844, 1], [1, 0.9568627450980393, 0.7450980392156863, 1], [1, 0.9568627450980393, 0.7568627450980392, 1], [1, 0.9568627450980393, 0.7647058823529411, 1], [1, 0.9607843137254902, 0.7764705882352941, 1], [1, 0.9607843137254902, 0.7843137254901961, 1], [1, 0.9647058823529412, 0.796078431372549, 1], [1, 0.9647058823529412, 0.803921568627451, 1], [1, 0.9686274509803922, 0.8156862745098039, 1], [1, 0.9686274509803922, 0.8235294117647058, 1], [1, 0.9725490196078431, 0.8352941176470589, 1], [1, 0.9725490196078431, 0.8431372549019608, 1], [1, 0.9725490196078431, 0.8549019607843137, 1], [1, 0.9764705882352941, 0.8627450980392157, 1], [1, 0.9764705882352941, 0.8745098039215686, 1], [1, 0.9803921568627451, 0.8823529411764706, 1], [1, 0.9803921568627451, 0.8941176470588236, 1], [1, 0.984313725490196, 0.9019607843137255, 1], [1, 0.984313725490196, 0.9137254901960784, 1], [1, 0.984313725490196, 0.9215686274509803, 1], [1, 0.9882352941176471, 0.9333333333333333, 1], [1, 0.9882352941176471, 0.9411764705882353, 1], [1, 0.9921568627450981, 0.9529411764705882, 1], [1, 0.9921568627450981, 0.9607843137254902, 1], [1, 0.996078431372549, 0.9725490196078431, 1], [1, 0.996078431372549, 0.9803921568627451, 1], [1, 1, 0.9921568627450981, 1], [1, 1, 1, 1]],
      }),
          Timeline.create({
            container: '#wave-timeline',
            fontSize: 14,
            primaryFontColor: "#9191a5",
            secondaryFontColor: "#9191a5",
            primaryColor: "#9191a5",
            secondaryColor: "#9191a5",
          }),

          Regions.create(
            {
              start: 1,
              end: 3,
              color: 'hsla(400, 100%, 30%, 0.5)'
            },
            {
              start: 5,
              end: 7,
              color: 'hsla(200, 50%, 70%, 0.4)'
            }

          ),
        ]
      });
      wavesurfer.loadBlob(path)
      //this.$data.wavesurfer = this.wavesurfer
      


 
    },

  }
}


</script>

<script  setup>
  import { ref } from "vue";
  const radio = ref(512)
</script>
<style scoped>

#selectSongFile {
  margin-top: 10px;
}

.center1 {
  width: 500px;
  margin: 0 auto;
}
.container {
  width: 100%;
  margin: 0 auto;
  /* vertical-align : middle; */
}

.pop {
  background-color: #fff;
 
  position: fixed;
  top: 100px;
  left: 300px;
  width: 800px;
  height:650px;
  z-index: 2
}

.mask {
  background-color: #000;
  opacity: 0.3;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1
}

#closeFile{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#openFile{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

.dimage{
  height: 16px;
  width: 30px;

}

.config-button{
  height: 20px;
  width: 30px;
}

#threed{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#btnPause{
  border:none;
  background-color:transparent;
}

#btnbackward{
  border:none;
  background-color:transparent;
}
#btnforward{
  border:none;
  background-color:transparent;
}
#btnPlay{
  border:none;
  background-color:transparent;
}

#micStart{
  border:none;
  background-color:transparent;
}
#micStop{
  border:none;
  background-color:transparent;
}
#btnStop{
  border:none;
  background-color:transparent;
}


#recoStart{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}


#recoStop{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#recoPause{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#recoResume{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#save{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#recoTrash{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#recoPlay{
  border:none;
  background-color:transparent;
  font-size: 15px;
  font-weight: bold;
}

#recycle{
  border:none;
  background-color:transparent;
  font-size: 15px;
}

#save{
  border:none;
  background-color:transparent;
  font-size: 15px;
 
}

#recoTrash{
  border:none;
  background-color:transparent;
  font-size: 15px;  
}

#ProgressBar{
  width: 510px;
  height: 60px;
}

#control{
  width: 540px;
  
}

#waveform {
  max-width: 550px;
  height: 150px;
      
}
.wave-spectrogram {
  height: 180px;
  max-width: 550px;
  
}
#spe{
  font-weight: bold;
}

/* //直接引入在线 */
@import "https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css";
.luzhitxt.rownum{
  width:5px;
}
.luzhitxt{
  margin-top: 40px 30px ;
  width: 510px; 
}

.textArea{
  display: inline-block;
  height: 30px;
  width: 510px;
  border: 2px solid black;
  margin-top: 20px ;
  text-align:center;
}

.kong{
  height: 3px;
}

#jump {
  font-size: 15px;
  border:none;
  background-color:transparent;
  font-weight: bold;
}

#txtsave {
  font-size: 15px;
  border:none;
  background-color:transparent;
  font-weight: bold;
}

.add-music-button{
  margin-top: 0px 20px ;
}

.song {
  height: 40px;
  text-align: center;
}

#wave-timeline {
  width: 550px;
}

#rownumleft {
  border:none;
  background-color:transparent;
}

#rownumright {
  border:none;
  background-color:transparent;
}

#sumText {
  font-size: 14px;
  font-weight: bold;
}

#t1 {
  font-size: 15px;
  font-weight: bold;
}

#rownum1{
  width: 45px;
  height: 25px;
  background-color:transparent;
}

#add-txt-button{
  margin: 0 auto;
  
}

#simuFileName{
  font-weight: bold;
  /* border: 1px solid black; */
}

</style>